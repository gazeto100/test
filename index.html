<style>
canvas {

   			touch-action-delay: none;
			touch-action: none;
			-ms-touch-action: none;
			-webkit-transform: translateZ(0);
			-moz-transform: translateZ(0);
			-ms-transform: translateZ(0);
			-o-transform: translateZ(0);
			transform: translateZ(0);
}

		html, body {
			background: #000;
			color: #fff;
			overflow: hidden;
			touch-action: none;
			-ms-touch-action: none;
		}
</style>
<html>
<body onload="startGame()" scroll="no">

<script>



ArrayofCards = [

  {img: "cards/2c.gif", s: '2' }, 
  {img: "cards/3c.gif", s: '3' }, 
  {img: "cards/4c.gif", s: '4' }, 
  {img: "cards/5c.gif", s: '5' },
  {img: "cards/6c.gif", s: '6' }, 
  {img: "cards/7c.gif", s: '7' }, 
  {img: "cards/8c.gif", s: '8' }, 
  {img: "cards/9c.gif", s: '9' }, 
  {img: "cards/tc.gif", s: '10' }, 
  {img: "cards/ac.gif", s: '11', s1: '1' }, 
  {img: "cards/jc.gif", s: '10' }, 
  {img: "cards/qc.gif", s: '10' },
  {img: "cards/kc.gif", s: '10' },
  
  {img: "cards/2d.gif", s: '2' },
  {img: "cards/3d.gif", s: '3' },
  {img: "cards/4d.gif", s: '4' },
  {img: "cards/5d.gif", s: '5' },
  {img: "cards/6d.gif", s: '6' },
  {img: "cards/7d.gif", s: '7' },
  {img: "cards/8d.gif", s: '8' },
  {img: "cards/9d.gif", s: '9' },
  {img: "cards/td.gif", s: '10' },
  {img: "cards/ad.gif", s: '11', s1: '1' },
  {img: "cards/jd.gif", s: '10' }, 
  {img: "cards/qd.gif", s: '10' },
  {img: "cards/kd.gif", s: '10' },
  
  {img: "cards/2h.gif", s: '2' },
  {img: "cards/3h.gif", s: '3' },
  {img: "cards/4h.gif", s: '4' },
  {img: "cards/5h.gif", s: '5' },
  {img: "cards/6h.gif", s: '6' },
  {img: "cards/7h.gif", s: '7' },
  {img: "cards/8h.gif", s: '8' },
  {img: "cards/9h.gif", s: '9' },
  {img: "cards/th.gif", s: '10' },
  {img: "cards/ah.gif", s: '11', s1: '1' },
  {img: "cards/jh.gif",s: '10' }, 
  {img: "cards/qh.gif", s: '10' },
  {img: "cards/kh.gif", s: '10' },

  
  {img: "cards/2s.gif", s: '2' },
  {img: "cards/3s.gif", s: '3' },
  {img: "cards/4s.gif", s: '4' },
  {img: "cards/5s.gif", s: '5' },
  {img: "cards/6s.gif", s: '6' },
  {img: "cards/7s.gif", s: '7' },
  {img: "cards/8s.gif", s: '8' },
  {img: "cards/9s.gif", s: '9' },
  {img: "cards/ts.gif", s: '10' },
  {img: "cards/as.gif", s: '11', s1: '1' },
  {img: "cards/js.gif", s: '10' },
  {img: "cards/qs.gif", s: '10' },
  {img: "cards/ks.gif", s: '10' },


]

var BackCard = {img: "cards/back-card.png", s: '0'};
var Bgr = "img/Blackjack2.png";
var Frame = "img/Frame.png";
var shoe = "img/shoe.png";
var minMaxBet = "img/bet.png";
var rules = "img/rules.png";
var coins = "img/coins.png";
var bar = "img/bar.png";
var canselBet = "img/x.png";


var gameCards = [];
var DealerCards = [];
var PlayerCards = [];
var TableCards = [];
var BetCoins = [];

var m_cards = [];
  
var ArrayofButtons = [

{ img: 'img/hit.png', w:'100', h: '74', x: '0', y: '0'},
{ img: 'img/stand.png', w:'70', h: '52', x: '0', y: '0'},
{ img: 'img/surrender.png', w:'150', h: '53', x: '0', y: '0'},
{ img: 'img/double.png',  w:'150', h: '53', x: '0', y: '0'},
{ img: 'img/deal.png', img_of: 'img/deal_of.png', w:'70', h: '52', x: '0', y: '0'},

]


var ArrayofCoins = [

{ img: 'coin/1.png', w:'40', h: '40', x: '0', y: '0', sum: '1'},
{ img: 'coin/5.png', w:'40', h: '40', x: '40', y: '0', sum: '5'},
{ img: 'coin/10.png', w:'40', h: '40', x: '80', y: '0', sum: '10'},
{ img: 'coin/25.png',  w:'40', h: '40', x: '120', y: '0', sum: '25'},
{ img: 'coin/100.png', w:'40', h: '40', x: '160', y: '0', sum: '100'},
]

var state = [
'bet', 
'deal', 
'stand', 
'StandorHit',
'win', 
'lost',
'hit',
'superender',
'double',
];
var STATE;

var TotalBet = 0;
var SelectCoin = -1;

var Credit = 10000;
var nPointDealer = 0;
var nPointPlayer = 0;
var bHeight = window.innerHeight;
var bWidth = window.innerWidth;
var isStand = false;

var IndexDealCard = 0;

function startGame() {

    STATE = state[0];
    bHeight = window.innerHeight;
    bWidth = window.innerWidth;
    canvas = document.createElement("canvas");
    canvas.width = bWidth;
    canvas.height = bHeight;
    this.context = canvas.getContext("2d");

    loadAll208Cards();
    GameArea.start();

}

var GameArea = {
    
    
    start : function() {
	canvas.addEventListener("click", doMouseDown, false);
        document.body.insertBefore(canvas, document.body.childNodes[0]);
        this.interval = setInterval(updateGameArea, 1);
    },
    clear : function() {
        context.clearRect(0, 0, canvas.width, canvas.height);
    },
}

function doMouseDown(event){
  c_x = event.pageX;
  c_y = event.pageY;
  console.log( "X= " + c_x + " Y= " + c_y);
  if (STATE == 'bet' || STATE == 'deal'){
 
	for (i = 0; i < ArrayofCoins.length; i++){

	    if ( c_x > ArrayofCoins[i].x && c_x < parseInt(ArrayofCoins[i].x)+40 && 
	    c_y > (bHeight-55) && c_y < (bHeight)  ){
	      SelectCoin = -1;
	      SelectCoin = i;
	      //STATE = 'deal';
	      BetCoins[BetCoins.length] = SelectCoin;
	      if (STATE != "StandorHit" && SelectCoin != -1){
		STATE = 'deal';
		
		if (TotalBet >= 1000){
		  
		  return;
		}
		TotalBet += parseInt(ArrayofCoins[SelectCoin].sum);
		Credit = Credit - parseInt(ArrayofCoins[SelectCoin].sum);
	      }
      
	      return;    
	    }
	}
  }
  
  
  if (STATE == 'deal'){
    if ( c_x > ArrayofButtons[4].x && c_x < c_x+ArrayofButtons[4].w && 
    c_y > ArrayofButtons[4].y && c_y < c_y+ArrayofButtons[4].h  ){
    
      Deal();
      return;
    }
  }
  
    if (STATE == 'StandorHit'){
      if ( c_x > ArrayofButtons[4].x && c_x < c_x+ArrayofButtons[4].w && 
	c_y > ArrayofButtons[4].y && c_y < c_y+ArrayofButtons[4].h  ){
    
	Hit();
	return;
      }
      
      if ( c_x > ArrayofButtons[1].x && c_x < c_x+ArrayofButtons[1].w && 
	c_y > ArrayofButtons[1].y && c_y < c_y+ArrayofButtons[1].h  ){
    
	while ( nPointDealer < 17 ){
	  Stand();
	}
	
	return;
      }
    }
  
//  if (c_x > (bWidth/2)-112 && c_x < ((bWidth/2)-112)+GetImageH(Frame) && 
//    c_y > bHeight/2-GetImageH(Frame)/2 && c_y < (bHeight/2-GetImageH(Frame)/2) + GetImageH(Frame) && SelectCoin != -1 )
//  {
//      if (STATE != "StandorHit"){
//	STATE = 'deal';
//	
//	if (TotalBet >= 1000){
//	  
//	  return;
//	}
//	TotalBet += parseInt(ArrayofCoins[SelectCoin].sum);
//	Credit = Credit - parseInt(ArrayofCoins[SelectCoin].sum);
//      }
//  }
    if (c_x > (bWidth/2)-GetImageH(canselBet)/2 && c_x < ((bWidth/2)+GetImageH(canselBet)) && 
      c_y > bHeight/3 && c_y < (bHeight/3) + GetImageH(canselBet)+10 && SelectCoin != -1 )
    {
      STATE = 'bet';
      TotalBet = 0;
      Credit = 10000;
    }
    
}


function Hit(){


      var randum = Math.floor((Math.random() * 208) + 1);
      
      var num = 0;
      
      for (i = 0; i < TableCards.length; i++){
	if (TableCards[i] == gameCards[randum]){
	  num++
	  if (num > 4){
	    Hit();
	    return;
	  }
	}
      }
      
      PlayerCards[PlayerCards.length] = gameCards[randum];
      TableCards[TableCards.length]  = gameCards[randum];
      IndexDealCard++
}

function Stand(){

      var randum = Math.floor((Math.random() * 208) + 1);
      
      var num = 0;
      
      for (i = 0; i < TableCards.length; i++){
	if (TableCards[i] == gameCards[randum]){
	  num++
	  if (num > 4){
	    Stand();
	    return;
	  }
	}
      }
      
      
      DealerCards[DealerCards.length] = gameCards[randum];
      TableCards[TableCards.length]  = gameCards[randum];
      nPointDealer = 0;
      for (i = 0; i < DealerCards.length; i++){
	nPointDealer += parseInt(DealerCards[i].s);
      }
      
      IndexDealCard++

}




function loadAll208Cards(){

  var nAddCards = 0;
  for (i = 0; i < 4; i++){
    for (j = 0; j < 52; j++){
      gameCards[nAddCards] = ArrayofCards[j];
      //console.log(randum);
      nAddCards++;
    }
  }
 
 console.log(nAddCards);
}

function DrawAllImg(img, x, y, scale_x, scale_y) {
        
    this.image = new Image();
    this.image.src = img;   
    this.x = x;
    this.y = y;
    if (scale_x == 0 && scale_y == 0){
      scale_x = this.image.width;
      scale_y = this.image.height;
    }

    ctx = context;
    ctx.drawImage(this.image, 0, 0, this.image.width, this.image.height,x,y,scale_x,scale_y);
        
}

function GetImageW(img){

    this.image = new Image();
    this.image.src = img;   
    
    return this.image.width;
}

function GetImageH(img){

    this.image = new Image();
    this.image.src = img;   
    
    return this.image.height;
}

function updateGameArea() {

    bHeight = window.innerHeight;
    bWidth = window.innerWidth;
       
    if (canvas.width != bWidth || canvas.height != bHeight){
    canvas.width = bWidth;
    canvas.height = bHeight;
    }
     
    GameArea.clear();

    
    changeBtnCoords(bWidth, bHeight);
    
    DrawBgr(Bgr, 0, 0, bHeight, bWidth);
    //DrawFrame(Frame, 20, 50, 100, 105);

    //DrawAllImg(shoe, bWidth -300, 0, 0, 0);
    DrawAllImg(minMaxBet, 0, 0, 0, 0);
    //DrawAllImg(bar, bWidth/2, 0, 0, 0);
    
    //DrawAllImg(rules, (bWidth/2)-GetImageW(rules)/2, 200, 0, 0);
   
//    DrawAllImg(Frame, (bWidth/2)-112, bHeight/2-GetImageH(Frame)/2, 0, 0);
     
//    if (bWidth > 800){
//      DrawAllImg(coins, (bWidth/2)-GetImageW(coins)/2, 0, 0, 0);
//    }
    
    DrawToolBar();  

    if (STATE == 'bet'){
      //DrawButton(ArrayofButtons[4].img_of, ArrayofButtons[4].x, ArrayofButtons[4].y);
      //if (SelectCoin != -1){
	//DrawText("Clic to bet", bWidth/2, bHeight/2, "20px times new roman", "center");
      //}else {
	//DrawText("Select coin", bWidth/2, bHeight/2, "20px times new roman", "center");
     // }
    }else{
	    //DrawButton(ArrayofButtons[0].img, ArrayofButtons[0].x, ArrayofButtons[0].y);
	    //DrawButton(ArrayofButtons[1].img, ArrayofButtons[1].x, ArrayofButtons[1].y);
	    //DrawButton(ArrayofButtons[2].img, ArrayofButtons[2].x, ArrayofButtons[2].y);
	    //DrawButton(ArrayofButtons[3].img, ArrayofButtons[3].x, ArrayofButtons[3].y);
        if (STATE == "StandorHit"){
            DrawButton(ArrayofButtons[0].img, ArrayofButtons[0].x, ArrayofButtons[0].y);
            DrawButton(ArrayofButtons[1].img, ArrayofButtons[1].x, ArrayofButtons[1].y);
        }else {
            DrawButton(ArrayofButtons[4].img, ArrayofButtons[4].x, ArrayofButtons[4].y);
        }
    }
    
      DrawText("PAYS 3 TO 2", bWidth/2, 100, "20px times new roman", "center");
      DrawText("DEALER MUST DRAW TO 16 AND STAND ON ALL 17S", bWidth/2, 120, "12px times new roman", "center");

 
    for (i = 0; i < ArrayofCoins.length; i++){
    var yCoin = 0;
    if(SelectCoin == i){
	yCoin = 10;
    }else{
	yCoin = 0;
    }
      DrawAllImg(ArrayofCoins[i].img, 40*i, (bHeight-40)-yCoin, 0, 0);
    }
    
        
    nPointDealer = 0;
    for (i = 0; i < DealerCards.length; i++){
      nPointDealer += parseInt(DealerCards[i].s);
      DrawAllImg(DealerCards[i].img, ((bWidth))/2 + (25*i)-20, 50, 73, 97);
    }
    if (DealerCards.length == 1){
	DrawAllImg(BackCard.img, ((bWidth))/2 + (25*1)-20, 50, 73, 97);
    }
    if (nPointDealer > 0)
    DrawText(nPointDealer, bWidth/2-40, 60+GetImageH(DealerCards[0].img), "25px arial", "center");

    nPointPlayer = 0;
    for (i = 0; i < PlayerCards.length; i++){
      nPointPlayer += parseInt(PlayerCards[i].s);
      DrawAllImg(PlayerCards[i].img, ((bWidth))/2 + (25*i)-20, (bHeight/2)+50, 73, 97);
    }
    if (nPointPlayer > 0)
    DrawText(nPointPlayer, bWidth/2-40, (bHeight/2)+50, "25px arial", "center");

    
    if (STATE == "deal" || STATE == "StandorHit"){
      if (TotalBet == 1000){
	DrawText("Max Bet: "+TotalBet, 00, bHeight-60, "25px arial", "left");
      }else{
	DrawText("Bet: "+TotalBet, 5, bHeight-60, "25px arial", "left");
      }
      if (STATE == "deal"){
	DrawAllImg(canselBet,  ((bWidth)/2)-GetImageW(canselBet)/2, (bHeight)/3, 30, 30);
      }
    }
    
}

function changeBtnCoords(w, h){

  ArrayofButtons[4].x = w - 90;
  ArrayofButtons[4].y = h - 65;

  ArrayofButtons[0].x = w - 90;
  ArrayofButtons[0].y = h - 65;
  
  ArrayofButtons[1].x = w - 90;
  ArrayofButtons[1].y = ArrayofButtons[4].y - 60;
  
}

function DrawBgr(img, x, y, h, w){

    this.image = new Image();
    this.image.src = img;   
    this.x = x;
    this.y = y;
    ctx = context;
    ctx.drawImage(this.image, 0, 0, 1280, 900,x,y,w,h);

}

function DrawButton(img, x, y){

    this.image = new Image();
    this.image.src = img;   
    ctx = context;
    ctx.drawImage(this.image, x, y);
    
}

function DrawText(s_Text, n_x, n_y, font, align, color){
    
    var Text = s_Text;

    ctx = context;
    ctx.font = font;
    var getSizeInPixel = ctx.measureText(Text).width;
    var X = n_x;
    var Y = n_y;
    
    switch (align){
      case 'left':
	
      break;
      
      case 'center':
	X -= (getSizeInPixel/2);
      break;
      
      case 'right':
	X -= getSizeInPixel;
      break;
    
    }
    if (color){
      ctx.fillStyle = color;
    }else{
      ctx.fillStyle = 'white';
    }
    return ctx.fillText(Text, X, Y);
}

function Deal(){

  var randum = Math.floor((Math.random() * 208) + 1);
  
  for (j = 0; j < 2; j++){
      randum = Math.floor((Math.random() * 208) + 1);
      PlayerCards[j] = gameCards[randum];
      IndexDealCard++
      TableCards[j] = gameCards[randum];
  }
  
  
    randum = Math.floor((Math.random() * 208) + 1);
    DealerCards[0] = gameCards[randum];
    TableCards[TableCards.length] = gameCards[randum];
    IndexDealCard++;
  
  STATE = "StandorHit";
}

function DrawToolBar(){

  ctx.beginPath();
  ctx.lineWidth="2";
  DrawText("CREDIT", bWidth-50, 30, "25px arial", "right");
  DrawText(Credit, bWidth-60, 60, "25px arial", "right");

}


/*
function img(width, height, img, x, y) {

//    GamePiece = new img(224, 224, "gard0002.png", 0, 0);
//    GamePiece1 = new img(224, 224, "0_00000.png", 224, 0);
        
    this.image = new Image();
    this.image.src = img;   
    this.width = width;
    this.height = height;
    this.x = x;
    this.y = y;

    this.update = function(){
        ctx = context;
        ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
    }
    
    this.move = function(nX, nY){
	this.x = nX - 124;
	this.y = nY - 124
	
        ctx = context;
        ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
    }
    
}*/

</script>

</body></html>