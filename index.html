<style>
canvas {

   			touch-action-delay: none;
			touch-action: none;
			-ms-touch-action: none;
			-webkit-transform: translateZ(0);
			-webkit-full-screen: width: 100%;
			-moz-transform: translateZ(0);
			-ms-transform: translateZ(0);
			-o-transform: translateZ(0);
			transform: translateZ(0);

			height: 100%;
			width: 100%;
			
}


		html, body {
			background: #000;
			color: #fff;
			margin: 0; 
			padding: 0;
			overflow: hidden;
			touch-action: none;
			-ms-touch-action: none;
			 -webkit-transform: rotate(0deg);    
			transform: rotate(0deg);  
		}
		

</style>
<html><head>
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
</head>
<body onload="startGame()" scroll="no">
<audio id="myAudioTagID" type="audio/mpeg" src="sounds/coins.wav"></audio>
<audio id="myAudioTagDeal" type="audio/mpeg" src="sounds/distrib.wav"></audio>


<script>
			//height: 100%;
			//width: 100%;
PointsArray = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 10, 10, 10, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 10, 10, 10, 
	       2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 10, 10, 10, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 10, 10, 10,]


ArrayofCards = [

  "cards/c2.png",
  "cards/c3.png", 
  "cards/c4.png", 
  "cards/c5.png",
  "cards/c6.png", 
  "cards/c7.png",
  "cards/c8.png",
  "cards/c9.png",
  "cards/c10.png",
  "cards/c1.png",
  "cards/c11.png",
  "cards/c12.png",
  "cards/c13.png",
  
  "cards/d2.png",
  "cards/d3.png",
  "cards/d4.png",
  "cards/d5.png",
  "cards/d6.png",
  "cards/d7.png",
  "cards/d8.png",
  "cards/d9.png",
  "cards/d10.png",
  "cards/d1.png",
  "cards/d11.png",
  "cards/d12.png",
  "cards/d13.png",
  
  "cards/h2.png",
  "cards/h3.png",
  "cards/h4.png",
  "cards/h5.png",
  "cards/h6.png",
  "cards/h7.png",
  "cards/h8.png",
  "cards/h9.png",
  "cards/h10.png",
  "cards/h1.png",
  "cards/h11.png",
  "cards/h12.png",
  "cards/h13.png",

  
  "cards/s2.png",
  "cards/s3.png",
  "cards/s4.png",
  "cards/s5.png",
  "cards/s6.png",
  "cards/s7.png",
  "cards/s8.png",
  "cards/s9.png",
  "cards/s10.png",
  "cards/s1.png",
  "cards/s11.png",
  "cards/s12.png",
  "cards/s13.png"
]

var BackCard = "cards/back-card.png";
var Bgr = "img/Blackjack1.png";
var Frame = "img/Frame.png";
var shoe = "img/shoe.png";
var minMaxBet = "img/bet.png";
var rules = "img/rules.png";
var coins = "img/coins.png";
var bar = "img/bar.png";
var canselBet = "img/x.png";
var topBar = "img/topBar.png";

var gameCards = [];
var DealerCards = [];
var PlayerCards = [];

var TableCards = [];
var BetCoins = [];

var DealerPoints = [];
var PlayerPoints = [];

var PlayerCardsSplit1 = [];
var PlayerCardsSplit2 = [];
var PlayerSplitPoints1 = [];
var PlayerSplitPoints2 = [];

var cardsPoint = [];

var m_cards = [];
var m_changePoint = 0;

var m_cardsX = 0;
var m_cardsY = 0;

StopInterval = false;
var m_CaredAnim;

var PleyarSplitWin1 = false;
var PleyarSplitWin2 = false;

var PleyarSplitLost1 = false;
var PleyarSplitLost2 = false;
  
var PleyarSplitBust1 = false;
var PleyarSplitBust2 = false;

var PleyarSplitBJ1 = false;
var PleyarSplitBJ2 = false;

var PleyarSpitPush1 = false;
var PleyarSpitPush2 = false;

var ArrayofButtons = [

{ img: 'img/hit.png', w:'144', h: '114', x: '0', y: '0'},
{ img: 'img/stand.png', w:'144', h: '114', x: '0', y: '0'},
{ img: 'img/surrender.png', w:'144', h: '114', x: '0', y: '0'},
{ img: 'img/double.png',  w:'144', h: '114', x: '0', y: '0'},
{ img: 'img/deal.png', img_of: 'img/deal_of.png', w:'144', h: '114', x: '0', y: '0'},
{ img: 'img/split.png', w:'144', h: '114', x: '0', y: '0'},

]


var ArrayofCoins = [

{ img: 'coin/1.png', w:'220', h: '220', x: '50', y: '420', sum: '1'},
{ img: 'coin/5.png', w:'220', h: '220', x: '250', y: '420', sum: '5'},
{ img: 'coin/10.png', w:'220', h: '220', x: '450', y: '420', sum: '10'},
{ img: 'coin/25.png',  w:'220', h: '220', x: '650', y: '420', sum: '25'},
{ img: 'coin/100.png', w:'220', h: '220', x: '850', y: '420', sum: '100'},
]


var state = [
'bet', 
'deal', 
'stand', 
'StandorHit',
'win', 
'lost',
'hit',
'double',
];
var STATE;

var TotalBet = 0;
var SelectCoin = -1;

var Credit = 10000;
var nPointDealer = 0;
var nPointPlayer = 0;
var bHeight = window.innerHeight;
var bWidth = window.innerWidth;
var isStand = false;
var m_CoinAnimY = 0;
var m_CoinAnim;

var nPointPlayerSplit1 = 0;
var nPointPlayerSplit2 = 0;

var splitNewGame = false;
var dealerWin = false;
var playerWin = false;
var dealer21 = false;
var player21 = false;
var playerBust = false;
var pas = false;
var surrender = false;
var newGame = false;

var isFirst = false;
var split = false;

var isSplit = false;

var IndexDealCard = 0;

var CoinSound;

var randum = 0;

//CoinSound.pause();
//CoinSound.stop();
function startGame() {
bHeight = window.innerHeight;
var bWidth = window.innerWidth;

    STATE = state[0];
    bHeight = window.innerHeight;
    bWidth = window.innerWidth;
    canvas = document.createElement("canvas");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    this.context = canvas.getContext("2d");
    loadAll52Cards();
    CoinSound = document.getElementById("myAudioTagID");
    CardsSound = document.getElementById("myAudioTagDeal");
 
    GameArea.start();
}



var GameArea = {
    
    
    start : function() {
	canvas.addEventListener("click", doMouseDown, false);
        document.body.insertBefore(canvas, document.body.childNodes[0]);
        this.interval = setInterval(updateGameArea, 2);
    },
    clear : function() {
        context.clearRect(0, 0, canvas.width, canvas.height);
    },
}



function doMouseDown(event){
  c_x = event.pageX;
  c_y = event.pageY;
  
  console.log(c_x);
  console.log(c_y);
  
  if (isSplit && newGame == true){
    StartNewGame(isSplit);
      PleyarSplitWin1 = false;
      PleyarSplitWin2 = false;
    
      PleyarSplitLost1 = false;
      PleyarSplitLost2 = false;
      
      PleyarSplitBust1 = false;
      PleyarSplitBust2 = false;
      
      PleyarSplitBJ1 = false;
      PleyarSplitBJ2 = false;

      PleyarSpitPush1 = false;
      PleyarSpitPush2 = false;
      TotalBet = 0;
  }
  
  
  if (dealerWin){
    StartNewGame(dealerWin);
    return;
  }
  if (playerWin){
    StartNewGame(playerWin);
    return;
  }
  if (dealer21){
    StartNewGame(dealer21);
    return;
  }
  if (player21){
    StartNewGame(player21);
    return;
  }
  if (playerBust){
    StartNewGame(playerBust);
    return;
  }
  if ( pas ){
    StartNewGame(pas);
    return;
  }
  if ( surrender ){
    StartNewGame(surrender);
    return;
  }
  

  
  
  
  if (STATE == 'bet' || STATE == 'deal'){
 
	for (i = 0; i < ArrayofCoins.length; i++){

	    if ( c_x > parseInt(ArrayofCoins[i].x) && c_x < parseInt(ArrayofCoins[i].x)+parseInt(ArrayofCoins[i].w) && 
	    c_y > bHeight-(ArrayofCoins[i].y) && c_y < bHeight-parseInt(ArrayofCoins[i].y)+parseInt(ArrayofCoins[i].h)  ){
	      SelectCoin = -1;
	      SelectCoin = i;
	      //STATE = 'deal';
	      
	      if (STATE != "StandorHit" && SelectCoin != -1){
		STATE = 'deal';
		CoinSound.play();
		if (TotalBet+parseInt(ArrayofCoins[SelectCoin].sum) > 1000){
		  
		  return;
		}
		TotalBet += parseInt(ArrayofCoins[SelectCoin].sum);
		Credit = Credit - parseInt(ArrayofCoins[SelectCoin].sum);
		m_CoinAnimY = 0;
		
		BetCoins[BetCoins.length] = ArrayofCoins[SelectCoin].img;
		
		
		
		StopInterval = false;
		//clearTimeout(m_CoinAnim);
		//m_CoinAnim = setInterval(moveCoin, 10);
	      }
      
	      return;    
	    }
	}
  }
  
  
  function checkCoins(){
  
  var nNum = 0;
  var NewArray = [];
  for (i = 0; i < BetCoins.length; i++){
    if (BetCoins[i] == ArrayofCoins[SelectCoin].img){
      nNum++
    }
  }
  
  }
  
  
  if (STATE == 'deal'){
    if ( c_x > parseInt(ArrayofButtons[4].x) && c_x < c_x+parseInt(ArrayofButtons[4].w) && 
    c_y > parseInt(ArrayofButtons[4].y) && c_y < parseInt(ArrayofButtons[4].y)+parseInt(ArrayofButtons[4].h)  ){
    
      Deal();
      
	nPointPlayer = 0;
	for (i = 0; i < PlayerCards.length; i++){
	  nPointPlayer += PlayerPoints[i];
	}
      	dealerWin = false;
	player21 = false;
	pas = false;
	var chackPlayer21 = 0;
	for (i = 0; i < PlayerCards.length; i++){
	  chackPlayer21 += PlayerPoints[i];
	}
	if (chackPlayer21 == 21){
	  
	  while ( nPointDealer < 17 ){
	    Stand();
	  }
	  if (nPointDealer < 21 || nPointDealer > 21){ 
	    player21 = true;
	    newGame = true;
	  }else if (nPointDealer == 21){
	    pas = true;
	    newGame = true;
	  }
	  
	}
	//m_CaredAnim = setInterval(CardsAnim, 30);
      return;
    }
  }
  
    if (STATE == 'StandorHit'){
      if ( c_x > parseInt(ArrayofButtons[0].x) && c_x < c_x+parseInt(ArrayofButtons[0].w) && 
	c_y > parseInt(ArrayofButtons[0].y) && c_y < parseInt(ArrayofButtons[0].y)+parseInt(ArrayofButtons[4].h)  ){
    
	Hit();
	
	nPointPlayer = 0;
	for (i = 0; i < PlayerPoints.length; i++){
	  nPointPlayer += PlayerPoints[i];
	}
	
	dealerWin = false;
	playerWin = false;
	playerBust = false;
	player21 = false;
	
	if (nPointPlayer > 21){
	  playerBust = true;
	  newGame = true;
	}
	
	if (nPointPlayer == 21){
	  while ( nPointDealer < 17 ){
	    Stand();
	  }
	  if (nPointDealer < 21 || nPointDealer > 21){
	    if (PlayerPoints.length > 2){
	      playerWin = true;
	      newGame = true;
	    }else{
	      player21 = true;
	      newGame = true;
	    }
	  }
	}
	if (nPointPlayer == nPointDealer){
	  pas = true;
	  newGame = true;
	}
	
	
	return;
      }
      
      if ( c_x > parseInt(ArrayofButtons[1].x) && c_x < c_x+parseInt(ArrayofButtons[1].w) && 
	c_y > parseInt(ArrayofButtons[1].y) && c_y < parseInt(ArrayofButtons[1].y)+parseInt(ArrayofButtons[1].h)  ){
    
	if (isSplit){

	  if (isFirst){
	    isFirst = false;
	    return;
	  }else {
	    while ( nPointDealer < 17 ){
	      Stand();
	    }
	  
	    CheckSplitPoints();
	  
	  }
	  return;
	}
	while ( nPointDealer < 17 ){
	  Stand();
	}
	
	nPointDealer = 0;
	for (i = 0; i < DealerCards.length; i++){
	  nPointDealer += DealerPoints[i];
	}
	
	dealerWin = false;
	playerWin = false;
	pas = false;
	if (nPointDealer > nPointPlayer && nPointDealer < 21){
	  dealerWin = true;
	  newGame = true;
	}
	if (nPointDealer == 21 && nPointPlayer < 21){
	  dealerWin = true;
	  newGame = true;
	}
	if (nPointPlayer > nPointDealer && nPointPlayer < 21 || nPointDealer > 21){
	  playerWin = true
	  newGame = true;
	}
	
	if (nPointPlayer == nPointDealer){
	  pas = true;
	  newGame = true;
	}
	
	return;
      }
    }
  
    if (c_x > (bWidth/2)-GetImageH(canselBet)/2 && c_x < ((bWidth/2)+GetImageH(canselBet)) && 
      c_y > bHeight/3 && c_y < (bHeight/3) + GetImageH(canselBet)+10 && SelectCoin != -1 )
    {
      STATE = 'bet';
      Credit = Credit+TotalBet;
      TotalBet = 0;

      BetCoins = [];
    }
    
    
    if (STATE == 'StandorHit'){
      if ( c_x > parseInt(ArrayofButtons[3].x) && c_x < parseInt(ArrayofButtons[3].x)+parseInt(ArrayofButtons[3].w) && 
	c_y > parseInt(ArrayofButtons[3].y) && c_y < parseInt(ArrayofButtons[3].y)+parseInt(ArrayofButtons[3].h)  ){
    
	Hit();
	
	while ( nPointDealer < 17 ){
	    Stand();
	}
	
	TotalBet += parseInt(ArrayofCoins[SelectCoin].sum);
	Credit = Credit - parseInt(ArrayofCoins[SelectCoin].sum);
	
	nPointPlayer = 0;
	for (i = 0; i < PlayerPoints.length; i++){
	  nPointPlayer += PlayerPoints[i];
	}
	
	dealerWin = false;
	playerWin = false;
	dealer21 = false;
	player21 = false;
	playerBust = false;
	pas = false;
	
	if (nPointPlayer > 21){
	  playerBust = true;
	  newGame = true;
	}
	
	if (nPointPlayer == 21){

	  if (nPointDealer < 21 || nPointDealer > 21){
	    player21 = true;
	    newGame = true;
	  }
	}
	if (nPointPlayer == nPointDealer){
	  pas = true;
	  newGame = true;
	}
	
	  if (nPointDealer > 21 && nPointPlayer < 21){
	    playerWin = true;
	    newGame = true;
	  }
	  if (nPointDealer == 21 && nPointPlayer < 21){
	    dealerWin = true;
	    newGame = true;
	  }
	  if (nPointDealer < 21 && nPointPlayer > nPointDealer && nPointPlayer < 21){
	    playerWin = true;
	    newGame = true;
	  }
	  
	  if (nPointDealer < 21 && nPointPlayer < nPointDealer && nPointPlayer < 21){
	    dealerWin = true;
	    newGame = true;
	  }
	  
	return;
      }
      
      
      
      if ( c_x > parseInt(ArrayofButtons[2].x) && c_x < parseInt(ArrayofButtons[2].x)+parseInt(ArrayofButtons[2].w) && 
	c_y > parseInt(ArrayofButtons[2].y) && c_y < parseInt(ArrayofButtons[2].y)+parseInt(ArrayofButtons[2].h)  ){
	
	  var surr = 0;
	  surrender = true;
	  sur = TotalBet/2
	  Credit += sur;
	  TotalBet = 0;
	  newGame = true;
	  return;
	}
    
	if(split && !isSplit ){
	  if ( c_x > parseInt(ArrayofButtons[5].x) && c_x < parseInt(ArrayofButtons[5].x)+parseInt(ArrayofButtons[5].w) && 
	    c_y > parseInt(ArrayofButtons[5].y) && c_y < parseInt(ArrayofButtons[5].y)+parseInt(ArrayofButtons[5].h)  ){
	    
		isSplit = true;
		SplitHit();
		Credit -= TotalBet;
		TotalBet += TotalBet;
		isFirst = true;
		CheckSplitPoints();
	    }
	}
    
    

    }
}



  function CheckSplitPoints(){
  
  PleyarSplitWin1 = false;
  PleyarSplitWin2 = false;
 
  PleyarSplitLost1 = false;
  PleyarSplitLost2 = false;
  
  PleyarSplitBust1 = false;
  PleyarSplitBust2 = false;
  
  PleyarSplitBJ1 = false;
  PleyarSplitBJ2 = false;

  PleyarSpitPush1 = false;
  PleyarSpitPush2 = false;

  
  if (nPointDealer > nPointPlayerSplit1 && nPointDealer < 21){
    PleyarSplitLost1 = true;
    newGame = true;
  }

  if (nPointDealer > nPointPlayerSplit2 && nPointDealer < 21){
    PleyarSplitLost2 = true;
    newGame = true;
  }
  
  if (nPointDealer < nPointPlayerSplit1 && nPointPlayerSplit1 < 21){
    PleyarSplitWin1 = true;
    newGame = true;
    Credit += (TotalBet/2)*2;
  }
  
  if (nPointDealer < nPointPlayerSplit2 && nPointPlayerSplit2 < 21){
    PleyarSplitWin2 = true;
    newGame = true;
    Credit += (TotalBet/2)*2;
  }
  
  
  if (nPointPlayerSplit1 > 21){
    PleyarSplitBust1 = true;
    newGame = true;
  }
  
  if (nPointPlayerSplit2 > 21){
    PleyarSplitBust2 = true;
    newGame = true;
  }
  
  if (nPointPlayerSplit1 == nPointDealer){
    PleyarSpitPush1 = true;
    newGame = true;
  }
  
  if (nPointPlayerSplit2 == nPointDealer){
    PleyarSpitPush2 = true;
    newGame = true;
  }
  
  
  if (21 == nPointPlayerSplit1 && nPointDealer < 21){
    if (PlayerCardsSplit1.length < 2){
      PleyarSplitBJ1 = true;
      newGame = true;
      var bj = TotalBet/2;
      bj = bj/2;
      Credit += bj*2+bj;
    }else {
      PleyarSplitWin1 = true;
      newGame = true;
      Credit += (TotalBet/2)*2;
    }
  }
  
  if (21 == nPointPlayerSplit2 && nPointDealer < 21){
    if (PlayerCardsSplit2.length < 2){
      PleyarSplitBJ2 = true;
      newGame = true;
      var bj = TotalBet/2;
      bj = bj/2;
      Credit += bj*2+bj;
    }else {
      PleyarSplitWin2 = true;
      newGame = true;
      Credit += (TotalBet/2)*2;
    }
  }
  
  
  if ( nPointPlayerSplit1 < 21 && nPointDealer > 21){
    PleyarSplitWin1 = true;
    newGame = true;
    Credit += (TotalBet/2)*2;
  }
  
  if (nPointPlayerSplit2 < 21 && nPointDealer > 21){
    PleyarSplitWin2 = true;
    newGame = true;
    Credit += (TotalBet/2)*2;
  }
  
  if (nPointDealer == 21 && nPointPlayerSplit1 < 21){
    PleyarSplitLost1 = true;
  }
  if (nPointDealer == 21 && nPointPlayerSplit2 < 21){
    PleyarSplitLost1 = true;
  }
  
}


function Hit(){

  if (!isSplit){
	randum = 0;
	randum = Math.floor((Math.random() * 52));
	var num = 0;
	
	for (i = 0; i < TableCards.length; i++){
	  if (TableCards[i] == gameCards[randum]){
	    num++
	    if (num > 0){
	      Hit();
	      return;
	    }
	  }
	}
	
	PlayerCards[PlayerCards.length] = gameCards[randum];
	
	PlayerPoints[PlayerPoints.length] = cardsPoint[randum];
	
	
	nPointPlayer = 0;
	  for (i = 0; i < PlayerPoints.length; i++){
	  nPointPlayer += PlayerPoints[i];
	}
	
	TableCards[TableCards.length]  = gameCards[randum];
	IndexDealCard++;
	
	if (nPointPlayer > 21){
	  for (i = 0; i < PlayerPoints.length; i++){
	      if (PlayerPoints[i] == 11){
		    PlayerPoints[i] = 1;
	      }
	  } 
	}
	
  }else{

      if (isFirst){
      
	randum = 0;
	randum = Math.floor((Math.random() * 52));
	var num = 0;
	
	for (i = 0; i < TableCards.length; i++){
	  if (TableCards[i] == gameCards[randum]){
	    num++
	    if (num > 0){
	      Hit();
	      return;
	    }
	  }
	}
	
	PlayerCardsSplit1[PlayerCardsSplit1.length] = gameCards[randum];
	
	PlayerSplitPoints1[PlayerSplitPoints1.length] = cardsPoint[randum];
	
	
	nPointPlayerSplit1 = 0;
	  for (i = 0; i < PlayerSplitPoints1.length; i++){
	  nPointPlayerSplit1 += PlayerSplitPoints1[i];
	}
	
	TableCards[TableCards.length]  = gameCards[randum];
	IndexDealCard++;
	
	if (nPointPlayerSplit1 > 21){
	  for (i = 0; i < PlayerSplitPoints1.length; i++){
	      if (PlayerSplitPoints1[i] == 11){
		    PlayerSplitPoints1[i] = 1;
	      }
	  } 
	  
	  nPointPlayerSplit1 = 0;
	  for (i = 0; i < PlayerSplitPoints1.length; i++){
	    nPointPlayerSplit1 += PlayerSplitPoints1[i];
	  }
	}
	

      
      if (nPointPlayerSplit1 >21){
	isFirst = false;
      }
      
      }else {
	

	randum = 0;
	randum = Math.floor((Math.random() * 52));
	var num = 0;
	
	for (i = 0; i < TableCards.length; i++){
	  if (TableCards[i] == gameCards[randum]){
	    num++
	    if (num > 0){
	      Hit();
	      return;
	    }
	  }
	}
	
	PlayerCardsSplit2[PlayerCardsSplit2.length] = gameCards[randum];
	
	PlayerSplitPoints2[PlayerSplitPoints2.length] = cardsPoint[randum];
	
	
	nPointPlayerSplit2 = 0;
	  for (i = 0; i < PlayerSplitPoints2.length; i++){
	  nPointPlayerSplit2 += PlayerSplitPoints2[i];
	}
	
	TableCards[TableCards.length]  = gameCards[randum];
	IndexDealCard++;
	
	if (nPointPlayerSplit2 > 21){
	  for (i = 0; i < PlayerSplitPoints2.length; i++){
	      if (PlayerSplitPoints2[i] == 11){
		    PlayerSplitPoints2[i] = 1;
	      }
	  } 
	  
	  nPointPlayerSplit1 = 0;
	  for (i = 0; i < PlayerSplitPoints1.length; i++){
	    nPointPlayerSplit1 += PlayerSplitPoints1[i];
	  }
	}
	
	
	if (nPointPlayerSplit2 > 21){
	  if (nPointPlayerSplit1 <= 21 ){
	    while ( nPointDealer < 17 ){
	      Stand();
	    }
	  }
	  CheckSplitPoints();
	}
      
      }

  }   
      
     CardsSound.play();
      
}

function SplitHit(){


	randum = 0;
	randum = Math.floor((Math.random() * 52));
	var num = 0;
	
	for (i = 0; i < TableCards.length; i++){
	  if (TableCards[i] == gameCards[randum]){
	    num++
	    if (num > 0){
	      SplitHit();
	      return;
	    }
	  }
	}
	
	PlayerCardsSplit1[PlayerCardsSplit1.length] = gameCards[randum];
	
	PlayerSplitPoints1[PlayerSplitPoints1.length] = cardsPoint[randum];
	
	
	nPointPlayerSplit1 = 0;
	  for (i = 0; i < PlayerSplitPoints1.length; i++){
	  nPointPlayerSplit1 += PlayerSplitPoints1[i];
	}
	
	TableCards[TableCards.length]  = gameCards[randum];
	IndexDealCard++;
	
	if (nPointPlayerSplit1 > 21){
	  for (i = 0; i < PlayerSplitPoints1.length; i++){
	      if (PlayerSplitPoints1[i] == 11){
		    PlayerSplitPoints1[i] = 1;
	      }
	  } 
	}
	
	
	
	
	
	randum = 0;
	randum = Math.floor((Math.random() * 52));
	var num = 0;
	
	for (i = 0; i < TableCards.length; i++){
	  if (TableCards[i] == gameCards[randum]){
	    num++
	    if (num > 0){
	      Hit();
	      return;
	    }
	  }
	}
	
	PlayerCardsSplit2[PlayerCardsSplit2.length] = gameCards[randum];
	
	PlayerSplitPoints2[PlayerSplitPoints2.length] = cardsPoint[randum];
	
	
	nPointPlayerSplit2 = 0;
	  for (i = 0; i < PlayerSplitPoints2.length; i++){
	  nPointPlayerSplit2 += PlayerSplitPoints2[i];
	}
	
	TableCards[TableCards.length]  = gameCards[randum];
	IndexDealCard++;
	
	if (nPointPlayerSplit2 > 21){
	  for (i = 0; i < PlayerSplitPoints2.length; i++){
	      if (PlayerSplitPoints2[i] == 11){
		    PlayerSplitPoints2[i] = 1;
	      }
	  } 
	}

}

function Stand(){

      randum = 0;
      randum = Math.floor((Math.random() * 52));
      
      var num = 0;
      
      for (i = 0; i < TableCards.length; i++){
	if (TableCards[i] == gameCards[randum]){
	  num++
	  if (num > 0){
	    Stand();
	    return;
	  }
	}
      }
      
      
      DealerCards[DealerCards.length] = gameCards[randum];
      DealerPoints[DealerPoints.length] = cardsPoint[randum];
      
      TableCards[TableCards.length]  = gameCards[randum];
      nPointDealer = 0;
      for (i = 0; i < DealerCards.length; i++){
	nPointDealer += DealerPoints[i];
      }
      
      if (nPointDealer > 21){
	if (cardsPoint[randum] == 11){
	  DealerPoints[DealerPoints.length-1] = 1;
	}
      }
      
      nPointDealer = 0;
      for (i = 0; i < DealerCards.length; i++){
	nPointDealer += DealerPoints[i];
      }

      if (nPointDealer > 21){
	for (i = 0; i < DealerCards.length; i++){
	  if (DealerPoints[i] == 11){
	    DealerPoints[i] = 1;
	  }
	} 
      }
      
      nPointDealer = 0;
      for (i = 0; i < DealerCards.length; i++){
	nPointDealer += DealerPoints[i];
      }
      
      IndexDealCard++

}




function loadAll52Cards(){

  var nAddCards = 0;
  for (i = 0; i < 52; i++){
      gameCards[nAddCards] = ArrayofCards[i];
      cardsPoint[nAddCards] = PointsArray[i];
      //console.log(randum);
      nAddCards++;
  }
}

function moveCoin(){

    if ((bHeight/2) <= m_CoinAnimY){
    
      clearTimeout(m_CoinAnim);
      m_CoinAnimY = 0;
      if (TotalBet == 100){
	BetCoins = [];
	BetCoins[BetCoins.length] = ArrayofCoins[4].img;
      }else {
	BetCoins[BetCoins.length] = ArrayofCoins[SelectCoin].img;
      }
      return;
    }
    m_CoinAnimY += 10;

}

function DrawAllImg(img, x, y, scale_x, scale_y) {
        
    this.image = new Image();
    this.image.src = img;   
    this.x = x;
    this.y = y;
    if (scale_x == 0 && scale_y == 0){
      scale_x = this.image.width;
      scale_y = this.image.height;
    }

    ctx = context;
    ctx.drawImage(this.image, 0, 0, this.image.width, this.image.height,x,y,scale_x,scale_y);
        
}

function GetImageW(img){

    this.image = new Image();
    this.image.src = img;   
    
    return this.image.width;
}

function GetImageH(img){

    this.image = new Image();
    this.image.src = img;   
    
    return this.image.height;
}

function updateGameArea() {

    //bHeight = window.innerHeight;
    //bWidth = window.innerWidth;
       
//    if (canvas.width != bWidth || canvas.height != bHeight){
//    canvas.width = bWidth;
//    canvas.height = bHeight;
//    }
     
    
    
   
    
    changeBtnCoords(bWidth, bHeight);
    
    DrawAllImg(Bgr, 0, 0, bWidth, bHeight);
   
    DrawToolBar();  
DrawText(bHeight, 100, 200, "25px arial", "left", "red");
DrawText(bWidth, 100, 250, "25px arial", "left", "red");
 
    //if (STATE != 'bet'){
    //    if (STATE == "StandorHit"){
            DrawButton(ArrayofButtons[0].img, ArrayofButtons[0].x, ArrayofButtons[0].y);
            DrawButton(ArrayofButtons[1].img, ArrayofButtons[1].x, ArrayofButtons[1].y);
            
	    if (!isSplit){
	      DrawButton(ArrayofButtons[2].img, ArrayofButtons[2].x, ArrayofButtons[2].y);
	      DrawButton(ArrayofButtons[3].img, ArrayofButtons[3].x, ArrayofButtons[3].y);
            }
            //if (split && !isSplit ){
	      DrawButton(ArrayofButtons[5].img, ArrayofButtons[5].x, ArrayofButtons[5].y);
	    //}
       // }else {
            DrawButton(ArrayofButtons[4].img, ArrayofButtons[4].x, ArrayofButtons[4].y);
       // }
   // }
    
      DrawText("PAYS 3 TO 2", bWidth/2, 100, "20px arial", "center");
      DrawText("DEALER MUST DRAW TO 16 AND STAND ON ALL 17S", bWidth/2, 120, "12px arial", "center");

 
    if (STATE != "StandorHit"){
      for (i = 0; i < ArrayofCoins.length; i++){
      var yCoin = 0;
      if(SelectCoin == i){
	  yCoin = 10;
      }else{
	  yCoin = 0;
      }
	DrawAllImg(ArrayofCoins[i].img, ArrayofCoins[i].x, (bHeight-parseInt(ArrayofCoins[i].y))-yCoin, 0, 0);
      }
    }
    

	
	  SetCardsX(DealerCards.length);
	  for (i = 0; i < DealerCards.length; i++){
	    DrawAllImg(DealerCards[i], ((bWidth))/2 + (35*i)-m_cardsX, 70, 73, 97);
	  // console.log(DealerCards[i])
	  }
	  if (DealerCards.length == 1){
	      DrawAllImg(BackCard, ((bWidth))/2 + (35*1)-m_cardsX, 70, 73, 97);
	  }
	  if (nPointDealer > 0)
	  DrawText(nPointDealer, bWidth/2, 200, "25px arial", "center");

	  if (!isSplit){
	    
	    SetCardsX(PlayerCards.length);
	    for (i = 0; i < PlayerCards.length; i++){
	      //nPointPlayer += parseInt(PlayerCards[i].s);
	      DrawAllImg(PlayerCards[i], ((bWidth))/2 + (35*i)-m_cardsX, (bHeight/2)+50, 73, 97);
	    // console.log(PlayerCards[i]);
	    }

	    if (nPointPlayer > 0)
	    DrawText(nPointPlayer, bWidth/2, (bHeight/2)+40, "25px arial", "center");
	  }else{
	  
  
	    for (i = 0; i < PlayerCardsSplit1.length; i++){
	      //nPointPlayer += parseInt(PlayerCards[i].s);
	      DrawAllImg(PlayerCardsSplit1[i], 10 + (20*i), (bHeight/2)+50, 73, 97);
	    // console.log(PlayerCards[i]);
	    }
	    DrawText(nPointPlayerSplit1, 15, (bHeight/2)+40, "25px arial", "center");
	    
	    for (i = 0; i < PlayerCardsSplit2.length; i++){
	      //nPointPlayer += parseInt(PlayerCards[i].s);
	      DrawAllImg(PlayerCardsSplit2[i], bWidth/2 + (20*i), (bHeight/2)+50, 73, 97);
	    // console.log(PlayerCards[i]);
	    }

	    DrawText(nPointPlayerSplit2, bWidth/2, (bHeight/2)+40, "25px arial", "center");
	    if (isFirst){
	      DrawAllImg("img/alpha.png", bWidth/2, (bHeight/2)+50, 100, 100);
	    }else {
	      
	      DrawAllImg("img/alpha.png", 8, (bHeight/2)+50, SetAlphaScale(PlayerCardsSplit1.length), 100);
	    }
	    DrawText("Bet: "+TotalBet/2, 50, (bHeight/2)+GetImageH(PlayerCardsSplit2[0]), "20px arial", "center");
	    DrawText("Bet: "+TotalBet/2, bWidth/2, (bHeight/2)+GetImageH(PlayerCardsSplit2[0]), "20px arial", "left");
	  }

    
    
    if (STATE == "deal" || STATE == "StandorHit"){
      if (TotalBet == 1000){
	DrawText("Max Bet: "+TotalBet, ((bWidth)/2), 25, "20px arial", "center");
      }else{
	DrawText("Bet: "+TotalBet, ((bWidth)/2), 25, "20px arial", "center");
      }
      if (STATE == "deal"){
	DrawAllImg(canselBet,  ((bWidth)/2)-GetImageW(canselBet)/2, (bHeight)/3, 80, 80);
      }
    }
    
      for (i = 0; i < BetCoins.length; i++){
	DrawAllImg(BetCoins[i], (bWidth)/2+GetImageW(BetCoins[i])/4*i , bHeight/3+50, 0, 0);
      }
      
      if (!isSplit){
	  if (dealerWin){
	    DrawText("YOU LOST!", 5, (bHeight/2), "25px arial", "left", "red");
	  }else if (playerWin){
	    DrawText("YOU WON!", 5, (bHeight/2), "25px arial", "left");
	  }else if (player21){
	    DrawText("BLACKJACK!", 5, (bHeight/2), "25px arial", "left");
	  }
	  else if (playerBust){
	    DrawText("BUSTED!", 5, (bHeight/2), "25px arial", "left", "red");
	  }
	  else if (pas){
	    DrawText("PUSHED!", 5, (bHeight/2), "25px arial", "left", "red");
	  }
	  
	  
	  if (newGame){
	    DrawText("Touch for new game", 5, bHeight-80, "20px times new roman", "left");
	  }
      }else {
      
      	  if (newGame){
	    DrawText("Touch for new game", 5, bHeight-80, "20px times new roman", "left");
	  }
	  
      	  if (PleyarSplitWin1){
      	  
	    DrawText("Win", 20, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
	  
	  if (PleyarSplitWin2){
      	  
	    DrawText("Win", bWidth/2+50, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
	  
	  
      	  if (PleyarSplitLost1){
      	  
	    DrawText("Lost", 20, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
	  
	  if (PleyarSplitLost2){
      	  
	    DrawText("Lost", bWidth/2+50, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }

	  
      	  if (PleyarSplitBust1){
      	  
	    DrawText("BUSTED", 20, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
	  
	  if (PleyarSplitBust2){
      	  
	    DrawText("BUSTED", bWidth/2+50, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
  
      	  if (PleyarSplitBJ1){
      	  
	    DrawText("BLACKJACK", 20, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
	  
	  if (PleyarSplitBJ2){
      	  
	    DrawText("BLACKJACK", bWidth/2+50, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
	  
      	  if (PleyarSpitPush1){
      	  
	    DrawText("PUSHED", 20, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }
	  
	  if (PleyarSpitPush2){
      	  
	    DrawText("PUSHED", bWidth/2+50, (bHeight/2)+100, "20px times new roman", "left", "black");
	  }

      }
}

function SetAlphaScale(cards){

  switch(cards){
    case 2:
      return 100;
    break;
    case 3:
      return 120;
    break;
    case 4:
      return 140;
    break;
    case 5:
      return 160;
    break; 
    case 6:
      return 180;
    break; 
    case 7:
      return 200;
    break; 
  }
  

}


function SetCardsX(cardsX){

  switch(cardsX){
     case 1:
      m_cardsX = 50;
    break;
    case 2:
      m_cardsX = 50;
    break;
    case 3:
      m_cardsX = 70;
    break;
    case 4:
      m_cardsX = 80;
    break;
    case 5:
      m_cardsX = 90;
    break; 
    case 6:
      m_cardsX = 100;
    break; 
    case 7:
      m_cardsX = 110;
    break; 
  }

}

function changeBtnCoords(w, h){

  ArrayofButtons[4].x = w / 2 - GetImageW(ArrayofButtons[4].img)/2;
  ArrayofButtons[4].y = h - 180;

  ArrayofButtons[0].x = w / 2 + 150;
  ArrayofButtons[0].y = h - 160;
  
  ArrayofButtons[1].x = w - 180;
  ArrayofButtons[1].y = h - 140;
  
  ArrayofButtons[2].x = 40;
  ArrayofButtons[2].y = h - 140;
  
  
  ArrayofButtons[3].x = w / 2 - 150 - GetImageW(ArrayofButtons[3].img);
  ArrayofButtons[3].y = h - 160;
  
  ArrayofButtons[5].x = w / 2 - GetImageW(ArrayofButtons[5].img)/2;
  ArrayofButtons[5].y = h - 180;
  
}

function DrawBgr(img, x, y, h, w){

    this.image = new Image();
    this.image.src = img;   
    this.x = x;
    this.y = y;
    ctx = context;
    ctx.drawImage(this.image, 0, 0, 1080, 1920,x,y,w,h);

}

function DrawBgrToolBar(img, x, y, h, w){

    this.image = new Image();
    this.image.src = img;   
    this.x = x;
    this.y = y;
    ctx = context;
    ctx.drawImage(this.image, 0, 0, 1080, 30,x,y,w,h);

}

function DrawButton(img, x, y){

    this.image = new Image();
    this.image.src = img;   
    ctx = context;
    ctx.drawImage(this.image, x, y);
    
}

function DrawText(s_Text, n_x, n_y, font, align, color){
    
    var Text = s_Text;

    ctx = context;
    ctx.font = font;
    var getSizeInPixel = ctx.measureText(Text).width;
    var X = n_x;
    var Y = n_y;
    
    switch (align){
      case 'left':
	
      break;
      
      case 'center':
	X -= (getSizeInPixel/2);
      break;
      
      case 'right':
	X -= getSizeInPixel;
      break;
    
    }
    if (color){
      ctx.fillStyle = color;
    }else{
      ctx.fillStyle = 'white';
    }
    return ctx.fillText(Text, X, Y);
}

function Deal(){

    randum = 0;
    
    if (PlayerCards.length < 2){
      for (j = 0; j < 2; j++){
	  randum = randum = Math.floor((Math.random() * 52));      
	  PlayerCards[j] = gameCards[randum];
	  PlayerPoints[j] = cardsPoint[randum]
	  IndexDealCard++
	  TableCards[j] = gameCards[randum];
      }
    

      if (TableCards[0] == PlayerCards[1]){
	Deal();
	return;
      }
      
    }
  
    randum = Math.floor((Math.random() * 52));
    DealerCards[0] = gameCards[randum];
    DealerPoints[0] = cardsPoint[randum];
    
    
    
    for (i = 0; i < TableCards.length; i++){
    
      if (TableCards[i] == DealerCards[0]){
	DealerCards = [];
	DealerPoints = [];
	Deal();
	return;
      }
    
    }
    TableCards[TableCards.length] = gameCards[randum];
    
    IndexDealCard++;
    //console.log(DealerCards[0]);
    nPointDealer = 0;
    for (i = 0; i < DealerCards.length; i++){
      nPointDealer += DealerPoints[i];

    }
    
    
    nPointPlayer = 0;
    for (i = 0; i < PlayerCards.length; i++){
      nPointPlayer += PlayerPoints[i];
    }
    
    if (PlayerPoints[0] == PlayerPoints[1]){
	
	
	PlayerCardsSplit1[0] = PlayerCards[0];
	PlayerSplitPoints1[0] = PlayerPoints[0];
	nPointPlayerSplit1 = PlayerPoints[0];
		
	PlayerCardsSplit2[0] = PlayerCards[1];
	PlayerSplitPoints2[0] = PlayerPoints[1];
	nPointPlayerSplit2 = PlayerPoints[1];
	split = true;
	
    }
    
    if (nPointPlayer > 21){
      PlayerPoints[0] = 1;
    }
    

    
    
  CardsSound.play();
  STATE = "StandorHit";
}

function DrawToolBar(){

  ctx.beginPath();
  ctx.lineWidth="2";
  DrawText("CREDIT", 50, 15, "20px arial", "center");
  DrawText(Credit, 50, 35, "20px arial", "center");

}


/*
function img(width, height, img, x, y) {

//    GamePiece = new img(224, 224, "gard0002.png", 0, 0);
//    GamePiece1 = new img(224, 224, "0_00000.png", 224, 0);
        
    this.image = new Image();
    this.image.src = img;   
    this.width = width;
    this.height = height;
    this.x = x;
    this.y = y;

    this.update = function(){
        ctx = context;
        ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
    }
    
    this.move = function(nX, nY){
	this.x = nX - 124;
	this.y = nY - 124
	
        ctx = context;
        ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
    }
    
}*/


function CardsAnim(){

  if (m_cardsY < (bHeight/2)-50){
    m_cardsY += 10;
    return;
  }else{
    m_cardsY = (bHeight/2)-50;
    clearInterval(m_CaredAnim);
    m_cardsY = 0;
    
  }
}

function StartNewGame(setResult){

  if (playerWin){
      STATE = 'bet';
      Credit += TotalBet*2;
      BetCoins = [];
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      TotalBet = 0;
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      playerWin = false;
      surrender = false;
      split = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      loadAll52Cards();
  }
  
   if (dealerWin){
      STATE = 'bet';
      BetCoins = [];
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      TotalBet = 0;
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      dealerWin = false;
      surrender = false;
      split = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      loadAll52Cards();
  }
  
  if (player21){
      STATE = 'bet';
      BetCoins = [];
      var bet = TotalBet/2;
      Credit += TotalBet*2+bet;
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      TotalBet = 0;
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      player21 = false;
      surrender = false;
      split = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      loadAll52Cards();
  }
  
  if (pas){
      STATE = 'bet';
      BetCoins = [];
      Credit += TotalBet;
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      TotalBet = 0;
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      pas = false;
      surrender = false;
      split = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      loadAll52Cards();
  }
  
  if (dealer21){
      STATE = 'bet';
      BetCoins = [];
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      TotalBet = 0;
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      dealer21 = false;
      surrender = false;
      split = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      loadAll52Cards();
  }
  if (playerBust){
      STATE = 'bet';
      BetCoins = [];
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      TotalBet = 0;
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      playerBust = false;
      surrender = false;
      split = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      loadAll52Cards();
  }
  if (surrender){
      STATE = 'bet';
      BetCoins = [];
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      TotalBet = 0;
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      playerBust = false;
      surrender = false;
      split = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      loadAll52Cards();
  }
  
  if (isSplit){
      STATE = 'bet';
      BetCoins = [];
      nPointPlayer = 0;
      nPointDealer = 0;
      PlayerCards = [];
      DealerCards = [];
      TableCards = [];
      PlayerPoints = [];
      DealerPoints = [];
      IndexDealCard = 0;
      BetCoins = [];
      newGame = false;
      playerBust = false;
      surrender = false;
      split = false;
      isFirst = false;
      SelectCoin = -1;
      m_changePoint = 0;
      PlayerCardsSplit1 = [];
      PlayerCardsSplit2 = [];
      PlayerSplitPoints1 = [];
      PlayerSplitPoints2 = [];
      isSplit = false;
      loadAll52Cards();
  }

}

</script>

</body></html>
